<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Shooting AR - Tag Test</title>
    <style>
      html,body { margin:0; padding:0; background:#000; color:#0f0; font-family:monospace; }
      #wrap { position:fixed; inset:0; display:grid; place-items:center; }
      #stage { position:relative; width:100vw; height:100vh; overflow:hidden; }
      video, canvas { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }
      #hud { position:absolute; left:8px; top:8px; white-space:pre; text-shadow:0 0 6px #000; }
      #reticle { position:absolute; inset:0; pointer-events:none; }
    </style>
    <!-- AprilTag WASM (ARENAビルド / 非モジュール) -->
    <script src="/ShootingAR/vendor/apriltag2/apriltag_wasm.js"></script>
  </head>
  <body>
    <div id="wrap">
      <div id="stage">
        <video id="video" playsinline autoplay muted></video>
        <canvas id="canvas" width="960" height="540"></canvas>
        <canvas id="overlay" width="960" height="540"></canvas>
        <div id="hud"></div>
        <!-- レティクル（CSSで描画） -->
        <svg id="reticle" viewBox="0 0 100 100">
          <circle cx="50" cy="50" r="6" fill="none" stroke="#0f0" stroke-width="1.5"/>
          <line x1="50" y1="0" x2="50" y2="20" stroke="#0f0" stroke-width="1.2"/>
          <line x1="50" y1="80" x2="50" y2="100" stroke="#0f0" stroke-width="1.2"/>
          <line x1="0" y1="50" x2="20" y2="50" stroke="#0f0" stroke-width="1.2"/>
          <line x1="80" y1="50" x2="100" y2="50" stroke="#0f0" stroke-width="1.2"/>
        </svg>
      </div>
    </div>

    <!-- アプリ本体（ESM） -->
    <script type="module" src="/ShootingAR/src/main.js"></script>
  </body>
</html>
